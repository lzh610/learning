# 变量和数据类型 #

1. 分类

    主要分为两种：基本类型的变量和引用类型的变量

2. 定义方式

    * 先定义，后使用
    ```
    int x = 100;   //定义一个int类型的变量
    x = 200;       //更改变量的值
    int n = x;     //用变量来定义变量
    
    ```

    * 需要进行初始化，不写初始值时，默认为0

## 一. 基本类型变量 ##

基本数据类型是CPU可以直接进行运算的类型

#### java中定义的类型 ####

1. 整数类型
    - 只定义了带符号的整数类型，最高位比特表示正负
    - 各种整型类型

        | 整型类型 | 大小 | 可表示范围 | 备注 |
        | ----- | ----- | ----- | ----- |
        | byte| 1字节 | -128 ~ 127 | ----- |
        | short | 2字节 | -32768 ~ 32767 | ----- |
        | int | 4字节 | -2147483648 ~ 2147483647 | ----- |
        | long | 8字节 | -9223372036854775808 ~ 9223372036854775807 | 结尾需要加`L` |

2. 浮点数类型
    - 浮点数即小数，用科学计数法表示时，小数点可浮动
    - 各种整型类型

        | 浮点数类型 | 大小 | 最大可表示 | 备注 | 举例 |
        | ----- | ----- | ----- | ----- | ----- |
        | float| 4字节 | 3.4x10^38 | **加后缀`f`** | 3.14e38f |
        | double | 8字节 | 1.79x10^308 | ----- | 4.9e-324,-1.79e308 |
        
    - float类型必须加后缀`f`,否则会提示不能将double转化成float

3. 字符类型
    - 关键字char，表示一个字符
    - 可表示标准的ASCII和unicode字符
    - 使用单引号`'`，仅包含一个字符，双引号`"`表示字符串
    - 显示一个字符的Unicode编码，需将char类型直接赋值给int类型
    ```
    int n1 = 'A'; // 字母“A”的Unicodde编码是65
    char c1 = '\u0041'; // 'A'，因为十六进制0041 = 十进制65
    ```

4. 布尔类型
    - 布尔类型boolean只有`true`和`false`两个值
    - 关系运算的结果，例如 `boolean isTeenager = age >6 && age <18;`
    - 理论上占用1bit，通常JVM表示为4字节整数

#### 特殊表示 ####

1. 常量
    + 添加修饰符`final`
    + 用有意义的变量名来避免魔术数字(Magic number)
    + 常量名通常全部大写
    + 不可重复赋值
    + 例如，`final double PI = 3.14;`

2. var关键字
    + 用于省略过长的类型名
    + 例如，`var sb = new StringBuilder();`等价于`StringBuilder sb = new StringBuilder();`

#### 变量作用范围  ####

- 在语句块`{}`中定义的变量，作用域从定义处开始，到语句块结束
- 遵循作用域最小化原则，尽量将变量定义在尽可能小的作用域
- 不要重复使用变量名

## 二. 基本运算 ##

* 遵循四则运算规则，可以使用任意嵌套的小括号

* 类型转换
    * 自动转换：默认转换为较大类型整型
    * 强制转换：(类型) 变量名
    * 对于超出范围的强制转型，高位字节直接被舍弃，仅保留低位字节，因此会得到错误的结果
    * 浮点数转整型：直接舍弃小数部分，在原数基础上`+0.5`可实现四舍五入

    ```
    int i = 123; 
    short j = (short) i; // 强制转换为short类型
    float m = 12.7; 
    int m = (int) m; // 12
    int m = (int) (m+0.5); // 13
    ```

* 整型运算
    - 运算结果永远是精确地
    - 除法`/`只保留整数部分，且除数为0时，编译不报错，运行报错
    - 超过运算范围时会发生溢出，但不会报错，可以将int类型变为long类型来解决溢出问题

* 浮点数运算
    * 无法精确表示，运算会产生误差
    * 比较浮点数是否相等：判断两个浮点数之差的绝对值是否小于一个很小的数
        ```
        // 比较x和y是否相等，先计算其差的绝对值:
        double r = Math.abs(x - y);
        // 再判断绝对值是否足够小:
        if (r < 0.00001) {
            // 可以认为相等
        } else {
            // 不相等
        }
        ```
    * 类型提升
        - 参与运算的两个数其中一个是整型，整型可以自动提升到浮点型
        - 在一个复杂的四则运算中，两个整数的运算不会出现自动提升的情况
    * 除数为0时，不报错，返回几个特殊值
        - `NaN`  表示Not a Number
        - `Infinity`  表示无穷大
        - `-Infinity`  表示负无穷大

#### 整型运算 ####

1. 自增/自减
    * ++n   先加1再引用n
    * n++   先引用n再加1

2. 移位运算

    对byte和short类型进行移位时，会首先转换为int再进行位移

    * 左移 
        * 符号表示：`<<`
        * 数学含义：`*2`  
        * 正数可以移位变成负数
    * 右移 
        * 符号表示：`>>`
        * 数学含义：`/2`  
        * 负数右移时，符号位不变，仍为1
        * 特殊`>>>`: 不带符号右移，符号位跟着移位，即对一个负数进行>>>右移最高位1变成0，变成正数

3. 位运算

    | 位运算 | 符号表示 | 计算方式 |
    | ----- | ----- | ----- |
    | 与 | & | 两者全为1时结果为1 |
    | 或 | \| | 任意一个为1结果为1 |
    | 非 | ~ | 0/1互换 |
    | 异或 | ^ | 相同为0，不同为1 |

    * 两个整数位运算：按位对齐，依次逐位运算

4. 优先级
    * `()`
    * `!` `~` `++` `--`
    * `-` `/` `%`
    * `*` `-`
    * `<<` `>>` `>>>`
    * `&`
    * `|`
    * `+=` `-=` `*=` `/=`

#### 布尔运算 ####
1. 关系运算
    * 比较运算符：`>`，`>=`，`<`，`<=`，`==`，`!=`
    * 与运算 `&&`
    * 或运算 `||`
    * 非运算 `!`
    * 优先级
        - `!`
        - `>` `>=` `<` `<=`
        - `==` `!=`
        - `&&`
        - `||`
2. 短路运算

    * 如果一个布尔运算的表达式能提前确定结果，则后续的计算不再执行，直接返回结果

3. 三元运算

    * 符号表达 `b ? x : y` 
    * 数学含义 

        根据第一个布尔表达式b的结果，分别返回后续两个表达式之一的计算结果：
        b为True，则返回x，b为False，则返回y；根据结果只计算xy中的一个，因此x,y类型必须相同


## 三. 引用类型变量 ##

#### 字符串 ####

字符串类型`String`是引用类型，用双引号"..."表示

* 转义字符

    | 转义字符 | 表示字符 |
    | ---- | ---- |
    | \" | " |
    | \' | ' |
    | \\ | \ |
    | \n | 换行符 |
    | \r | 回车符 |
    | \t | Tab |
    | \u#### | 一个Unicode编码的字符 |

* 字符串连接

    * 使用`+`连接任意字符串和其他数据类型

* 多行字符串

    * 使用`"""..."""`表示
    * 多行字符串前面共同的空格会被去掉，且总是以最短的行首空格为基准
    ```
    String s = """
               SELECT * FROM
               users
               WHERE id > 100
               ORDER BY name DESC
               """;
    ```

* 不可变特性

    字符串的不可变是指字符串内容不可变

* 空值null

    引用类型的变量可以指向一个空值null，它表示不存在，即该变量不指向任何对象

#### 数组 ####

* 基本概念
    - 定义方式 `类型[]`
    - 初始化方式
        + 类型[] name = new 类型[长度];
        + 类型[] name = new int[]{初始化数值};
        + 类型[] name = {初始化数值};
        + 初始化为默认值，整型是0，浮点型是0.0，布尔型是false
        + 数组创建后，大小不可改变
    - 获取数组大小 `数组变量.length`
    - 数组索引从0开始，索引范围为`0 ~ ns.length-1`

* 数组操作
    - 遍历
        + 使用for循环遍历数组，取数组的索引进行遍历
            ```
            for (int i = 0; i <= scores.length-1 ;i++ ) { //注意i的范围与等号
                //执行语句
                }
            }
            ```
        + 使用for each循环遍历数组，取数组的元素值，但无法获取索引
        + 打印数组的快速方式 `Arrays.toString(数组名)`
            + 需导入对应的包`import java.util.Arrays;`
    - 排序
        + 常见算法：冒泡排序法，插入排序，快速排序
        + 调用标准库排序功能`Arrays.sort(数组名)`实现排序

* 多维数组
    常用的多维数组为二维数组、三维数组
    - 二维数组定义方式 `int[][] ns = {{},{},{}}`
        + 每个数组元素的长度并不要求相同
    - 访问方式 `array[row][col]`
    - 打印方式 
        + 使用两层嵌套的for循环
            ```
            for (int[] arr : ns) {
                for (int n : arr) {
                    System.out.print(n);
                    System.out.print(', ');
                }
                System.out.println();
            }
            ```
        + 使用Java标准库的`Arrays.deepToString(数组名)`